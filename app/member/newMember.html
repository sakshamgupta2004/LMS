<!DOCTYPE html>
<html>
<head>
      <title></title>
      <link rel="stylesheet" href="../../node_modules/bootstrap/dist/css/bootstrap.min.css">
      <link rel="stylesheet" href="../include/css/theme.css">
      <script>let $ = require("jquery");</script>
      <script>require("popper.js");</script>
      <script>require("bootstrap");</script>
      <script src="../include/db/db.js"></script>

</head>
<body>

  <div class="loading" id="spinner" hidden="true">Loading&#8230;</div>
  <div class="container">
    <br/><br/><br/>
    <h1>New Member Registration</h1>
    <hr>
    <form id="memInp" >

    
      <div class="form-group row">
        <label class="col-sm-2" for="mName">Member Name</label>
        <div class="col-sm-10"><input class="form-control" type="text" name="mName"></div>
      </div>

      
      <div class="form-group row">
        <label class="col-sm-2" for="addr">Address</label>
        <div class="col-sm-10"><input class="form-control" type="text" name="addr"></div>
      </div>

      
      <div class="form-group row">
        <label class="col-sm-2" for="contact">Contact No</label>
        <div class="col-sm-10"><input class="form-control" type="text" name="contact"></div>
      </div>

      
      <div class="form-group row">
        <label class="col-sm-2" for="email">Email Address</label>
        <div class="col-sm-10"><input class="form-control" type="email" name="email"></div>
      </div>

      
      <div class="form-group row">
        <div class="col-sm-12"><input class="form-control" type="submit" value="Create Member"></div>
      </div>
    
    </form>
  
  </div>


</body>

      <script>

        $("#memInp").submit(function(event){
          var values = $(this).serializeArray();
          event.preventDefault();
          
          var inputs = {};
          $.each(values,function(k,v){
            inputs[v.name] = v.value;
          });

          console.log(inputs);
          var qry = "insert into member(memberName,addr,contact,email) values('" + inputs["mName"]+"','" +inputs["addr"]+"','" +inputs["contact"]+"','" +inputs["email"]+"')";
          console.log(qry);
          
          document.getElementsByClassName("loading").item(0).hidden=false;
          dbQuery(qry,1, () => {
              window.close();
            });
        });
          
      </script>
</html>
